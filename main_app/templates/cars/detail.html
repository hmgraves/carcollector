{% extends 'base.html' %}
{% block content %}

<h1>Car Details</h1>

<div class="row">
	<div class="col s6">
		<div class="card">
			<div class="card-content">
				<span class="card-title">{{ car.model }}</span>
				<p>Year: {{ car.year }}</p>
				<p>Make: {{ car.make }}</p>
				<p>Model: {{ car.model }}</p>
				<p>Color: {{ car.color }}</p>
				<p>Mileage: {{ car.mileage }}</p>
			</div>
			<div class="card-action">
				<a href="{% url 'cars_update' car.id %}">Edit</a>
				<a href="{% url 'cars_delete' car.id %}">Delete</a>
			</div>
		</div>
	</div>
	<div class="col s6">
		<form action="{% url 'add_maintenance' car.id %}" method="POST">
			{% csrf_token %}
			{{ maintenance_form.as_p }}
			<input type="submit" class="btn" value="Add Maintenance">
		</form>
		<table class="striped">
			<thead>
				<tr>
					<th>Date</th>
					<th>Type</th>
				</tr>
			</thead>
			<tbody>
				{% for maintenance in car.maintenance_set.all %}
				<tr>
					<td>{{maintenance.date}}</td>
					<td>{{maintenance.get_type_display}}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>

<script>
	const dateEl = document.getElementById('id_date');
  	M.Datepicker.init(dateEl, {
		format: 'yyyy-mm-dd',
		defaultDate: new Date(),
		setDefaultDate: true,
		autoClose: true
  	});

	const selectEl = document.getElementById('id_type');
	M.FormSelect.init(selectEl);
</script>

{% endblock %}